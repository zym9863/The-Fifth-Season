# 第五个季节 🌈

一个探索内心情感光谱和重构记忆碎片的创意应用

## 📖 项目简介

"第五个季节"是一个基于Python和Streamlit开发的情感分析与故事生成应用。它能够深度解析文本中的复杂情感，并将零散的记忆碎片编织成连贯的故事，为用户提供一个独特的情感探索和创意表达平台。

### 🎯 核心功能

#### 🌈 情感光谱分析器 (Emotional Spectrum Analyzer)
- **多维情感识别**: 不仅仅是简单的"积极"或"消极"，而是识别如"思念"、"失落"、"期待"、"无助"等多种细腻情感
- **权重计算**: 为每种情感分配权重，展示情感的强度分布
- **可视化展示**: 提供雷达图、柱状图、饼图和词云等多种可视化方式
- **情感摘要**: 自动生成情感分析的文字摘要

#### 📖 记忆碎片故事生成器 (Memory Fragment Story Generator)
- **智能故事创作**: 基于Pollinations API，将零散的记忆关键词编织成连贯的故事
- **多种风格**: 支持小说风格、电影桥段、诗意散文、日记体等多种创作风格
- **情感基调控制**: 可以指定故事的情感基调，如温暖、忧伤、思念等
- **多版本生成**: 支持生成同一主题的多个版本故事

## 🛠️ 技术栈

- **Python 3.12+**: 主要开发语言
- **Streamlit**: Web界面框架
- **uv**: 现代Python包管理器
- **jieba**: 中文分词
- **TextBlob**: 英文情感分析
- **Plotly**: 交互式图表
- **WordCloud**: 词云生成
- **Pollinations API**: AI文本生成

## 🚀 快速开始

### 环境要求
- Python 3.12 或更高版本
- uv包管理器

### 安装步骤

1. **克隆项目**
```bash
git clone https://github.com/zym9863/The-Fifth-Season.git
cd The\ Fifth\ Season
```

2. **安装依赖**
```bash
uv sync
```

3. **启动应用**
```bash
uv run streamlit run main.py
```

4. **访问应用**
打开浏览器访问 `http://localhost:8501`

### 测试功能
```bash
uv run python test_app.py
```

## 📁 项目结构

```
The Fifth Season/
├── main.py                    # 应用入口文件
├── test_app.py               # 功能测试脚本
├── pyproject.toml            # 项目配置文件
├── README.md                 # 项目文档
├── config/
│   └── settings.py           # 配置文件
├── src/
│   ├── __init__.py
│   ├── emotion_analyzer/     # 情感分析模块
│   │   ├── __init__.py
│   │   ├── analyzer.py       # 情感分析核心逻辑
│   │   └── visualizer.py     # 情感可视化组件
│   ├── story_generator/      # 故事生成模块
│   │   ├── __init__.py
│   │   └── generator.py      # 故事生成核心逻辑
│   ├── ui/                   # 用户界面模块
│   │   ├── __init__.py
│   │   └── main_app.py       # Streamlit主界面
│   └── utils/                # 工具函数模块
│       ├── __init__.py
│       └── helpers.py        # 辅助函数
```

## 🎨 使用指南

### 情感光谱分析

1. **输入文本**: 在文本框中输入要分析的文字
2. **开始分析**: 点击"开始分析"按钮
3. **查看结果**:
   - 情感摘要：文字描述的分析结果
   - 可视化图表：雷达图、柱状图、饼图
   - 情感词云：关键词的视觉展示
   - 详细信息：权重数据和统计信息

### 记忆碎片故事生成

1. **输入记忆碎片**:
   - 在文本框中输入，用逗号或换行分隔
   - 或使用标签输入方式逐个添加
2. **设置参数**:
   - 选择故事风格（小说风格、电影桥段等）
   - 选择情感基调（温暖、忧伤、思念等）
   - 选择故事长度（短、中等、长）
   - 添加自定义要求（可选）
3. **生成故事**: 点击"生成故事"按钮
4. **查看结果**: 阅读生成的故事和相关信息

## 🔧 配置说明

### 情感类别配置
在 `config/settings.py` 中可以自定义情感类别和关键词：

```python
EMOTION_CATEGORIES = {
    "思念": ["想念", "怀念", "思恋", "眷恋", "牵挂"],
    "失落": ["失望", "沮丧", "失意", "落寞", "惆怅"],
    # ... 更多情感类别
}
```

### API配置
Pollinations API配置：

```python
POLLINATIONS_API_URL = "https://text.pollinations.ai"
DEFAULT_MODEL = "openai"
DEFAULT_SEED = 42
```

## 🎯 特色功能

### 1. 多维情感分析
- 支持8种基础情感类型
- 基于关键词匹配和TextBlob情感分析
- 计算情感多样性指数
- 生成情感权重分布

### 2. 智能故事生成
- 基于先进的AI模型
- 支持多种创作风格
- 可控制情感基调
- 支持自定义创作要求

### 3. 丰富的可视化
- 情感雷达图：展示情感分布
- 柱状图：显示情感强度排序
- 饼图：展示情感比例
- 词云：可视化情感关键词

### 4. 用户友好界面
- 响应式设计
- 实时交互
- 历史记录保存
- 详细的分析信息

## 🔍 示例

### 情感分析示例
**输入文本**: "明明暗暗、零零散散，回忆情节重合明显，模糊了从前。滴滴点点、圆圆圈圈，像断了线。"

**分析结果**:
- 主导情感：思念 (0.45)
- 次要情感：失落 (0.30)、平静 (0.25)
- 情感多样性：0.68

### 故事生成示例
**记忆碎片**: 夕阳西下、老槐树、蝉鸣声、奶奶的摇椅、冰棍的甜味

**生成故事**: 一个关于童年夏日回忆的温馨故事...

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进项目！

### 开发环境设置
1. Fork项目
2. 创建功能分支
3. 安装开发依赖：`uv sync --dev`
4. 运行测试：`uv run python test_app.py`
5. 提交更改

## 📄 许可证

本项目采用MIT许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 🙏 致谢

- [Streamlit](https://streamlit.io/) - 优秀的Web应用框架
- [Pollinations](https://pollinations.ai/) - 强大的AI文本生成API
- [jieba](https://github.com/fxsjy/jieba) - 中文分词工具
- [Plotly](https://plotly.com/) - 交互式图表库

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- 提交Issue
- 发送邮件
- 项目讨论区

---

**第五个季节** - 探索情感的无限可能 🌈✨